#include <Arduino.h>
#include <Wire.h>

#define ADDRESS_1 0x08  // I2C address of the first device
#define ADDRESS_2 0x07  // I2C address of the second device

void sendDataToSlave(uint8_t address, uint16_t data) ;

void setup() {
  // Initialize I2C as master
  Wire.setClock(400000);
  // Wire.setSDA(20);
  // Wire.setSCL(21);  
  Wire.begin();       
  Serial.begin(9600);   // Initialize serial communication for debugging
  Serial.println("I2C Master Initialized");
  
  // Send characters to I2C devices
  sendDataToSlave(ADDRESS_1, 'A');  // Send 'A' to device at address 0x08
  delay(500);                       // Short delay between transmissions
  //sendDataToSlave(ADDRESS_2, 'B');  // Send 'B' to device at address 0x07
}
uint16_t val=0;
void loop() {
  // Send characters to I2C devices
  sendDataToSlave(0x00, val++);  // Send 'A' to device at address 0x08
  //sendDataToSlave(ADDRESS_1, '2');  // Send 'A' to device at address 0x08
 delay(50);                       // Short delay between transmissions
  //sendDataToSlave(ADDRESS_2, '3');  // Send 'B' to device at address 0x07
  //sendDataToSlave(ADDRESS_2, '4');  // Send 'B' to device at address 0x07
}

void sendDataToSlave(uint8_t address, uint16_t data) {
  
  uint8_t LSB = data & 0xff;
  uint8_t MSB = (data >> 8 )&0xff;
  Wire.beginTransmission(address);  // Start transmission to the given address
  Wire.write(MSB);                 // Send the character
  Wire.write(LSB);
  // Wire.write(data);
  // Wire.write(data);Wire.write(data);
  // Wire.write(data);
  // Wire.write(data);
  // Wire.write(data);
  // Wire.write(data);Wire.write(data);
  Wire.endTransmission(); // End transmission
  Serial.print("Sent ");
  Serial.print(data);
  Serial.print(" to address 0x");
  Serial.println(address, HEX);     // Print debug information
  // Wire.requestFrom(address,1);
  //   if(Wire.available())
  //   {
  //       Serial.print("\t data received : ");
  //       Serial.println(Wire.read());
  //   }
  
}
