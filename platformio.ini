; PlatformIO Project Configuration File
;
; HUB System Combined Board V1.0 - Clean deployment configurations
;
; To build:
;   pio run -e hub_master    (for master/hub)
;   pio run -e hub_slot      (for slot with sample count support)
;
; To upload:
;   pio run -e hub_master -t upload
;   pio run -e hub_slot -t upload

[platformio]
default_envs = hub_slot
src_dir = src
include_dir = include
lib_dir = lib

[env]
platform = https://github.com/maxgerhardt/platform-raspberrypi.git
board = pico
framework = arduino
board_build.core = earlephilhower
monitor_speed = 230400
lib_deps = 
    Wire
    adafruit/Adafruit NeoPixel
    SdFat
    IOEX
    MFLSensorHead
    shift_register
    High_Speed_ADC
    EasyTransfer
    EEPROM

; Common build flags for all environments
build_flags = 
    -D SERIAL_BAUDRATE=921600
    -I include
    -I lib

; ================================
; HUB MASTER DEPLOYMENT
; ================================
[env:hub_master]
upload_port = COM13
monitor_port = COM13
build_flags = 
    ${env.build_flags}
    -D BUILD_MASTER
    -D MASTER_VERSION=\"2.0.0\"
    -D BAUDRATE=152000
    -D DEFAULT_SENSOR_TYPE=1

; ================================
; HUB SLOT - Enhanced with sample count support  
; ================================
[env:hub_slot]
upload_port = COM14
monitor_port = COM14
build_flags = 
    ${env.build_flags}
    -D BUILD_SLOT
    -D DEFAULT_SLOT_ID=3
    -D SLOT_VERSION=\"2.1.0\"
    -D EGP
    -D COM_BAUDRATE=152000